package com.syswin.temail.dispatcher.request;

import java.io.FileOutputStream;
import java.util.Base64;
import org.junit.Ignore;
import org.junit.Test;

@Ignore
public class RequestUtil {

//  //    request.setUrl("http://temail-usermailagent.test.innertools.com/usermail");
//    request.setUrl("http://172.31.238.64:8081/usermail");
////    request.setUrl("http://192.168.1.182:8081/usermail");
//    if (request == null) {
//    log.error(UNSUPPORTED_CMD_PREfIX + "：{}, request param：{}", cmdHex, packet);
//    throw new DispatchException(UNSUPPORTED_CMD_PREfIX + "：" + combinedCommand, packet);
//  }
//
//  CDTPParams params = packetUtil.buildParams(packet);
//
////    String s = Base64.getUrlEncoder().encodeToString("姓名".getBytes());
////    CDTPHeader header = (CDTPHeader) params.getBody().get("meta");
////    params.getBody().put("fromNickName", s);
////    header.setExtraData(
////        "{\"from\":\"lhz188@systoontest.com\",\"fromNickName\":\"+s+\",\"msgId\":\"9506e93c-b698-4c3f-8155-17b69d2cfaeb\",\"parentMsgId\":\"\",\"sessionExtData\":\"{\\\"avatarHost\\\":\\\"http://msgseal.systoontest.com/temailimages/\\\",\\\"contactType\\\":1,\\\"isEmail\\\":false,\\\"name\\\":\\\""+s+"\\\"}\",\"storeType\":1,\"to\":\"lhz155@systoontest.com\",\"type\":0}");


  @Test
  public void transDataToBinary() throws Exception {
    //gateway RawPacketDecoder  packet data
    byte[] bb = new byte[]{0, 0, 7, 57, 0, 1, 0, 1, 0, 1, 4, 87, 10, 36, 100, 51, 49, 97, 99, 51, 56, 55, 45, 52, 102,
        57, 55, 45, 52, 48, 50, 53, 45, 98, 98, 55, 57, 45, 57, 57, 52, 51, 102, 49, 99, 100, 102, 49, 56, 54, 16, 2,
        26, -70, 1, 77, 73, 71, 73, 65, 107, 73, 66, 98, 53, 86, 67, 120, 101, 86, 89, 87, 73, 114, 99, 103, 72, 99,
        119, 65, 112, 87, 121, 67, 51, 84, 105, 70, 102, 85, 115, 84, 89, 114, 95, 105, 87, 110, 110, 107, 82, 89, 82,
        50, 45, 54, 102, 116, 54, 105, 102, 112, 104, 78, 72, 53, 119, 99, 84, 120, 107, 114, 121, 118, 72, 66, 111, 70,
        77, 57, 84, 110, 107, 88, 56, 119, 53, 71, 69, 111, 97, 84, 95, 90, 115, 68, 116, 99, 81, 119, 67, 81, 103, 71,
        95, 112, 100, 77, 68, 116, 75, 104, 99, 102, 114, 120, 99, 119, 67, 76, 82, 82, 51, 114, 78, 119, 113, 89, 85,
        70, 79, 99, 106, 110, 97, 70, 107, 111, 48, 102, 78, 88, 103, 122, 121, 52, 100, 48, 89, 57, 50, 74, 104, 48,
        52, 72, 105, 121, 81, 83, 79, 89, 99, 106, 81, 115, 112, 84, 82, 67, 71, 118, 85, 54, 50, 105, 57, 57, 51, 121,
        74, 121, 88, 67, 98, 90, 116, 103, 76, 53, 65, 32, 4, 41, 108, -94, -51, -84, 108, 1, 0, 0, 50, 64, 52, 49, 55,
        100, 57, 100, 54, 99, 45, 52, 102, 54, 100, 45, 52, 56, 49, 56, 45, 56, 50, 97, 102, 45, 52, 53, 102, 54, 50,
        100, 53, 52, 51, 51, 49, 101, 58, 113, 105, 97, 111, 121, 117, 113, 105, 97, 110, 103, 64, 122, 104, 101, 110,
        103, 116, 111, 111, 110, 46, 99, 111, 109, 58, 49, 58, 23, 100, 46, 53, 51, 51, 55, 51, 52, 50, 56, 56, 64, 109,
        115, 103, 115, 101, 97, 108, 46, 99, 111, 109, 66, -45, 1, 77, 73, 71, 98, 77, 66, 65, 71, 66, 121, 113, 71, 83,
        77, 52, 57, 65, 103, 69, 71, 66, 83, 117, 66, 66, 65, 65, 106, 65, 52, 71, 71, 65, 65, 81, 65, 76, 122, 69, 73,
        49, 70, 110, 97, 89, 53, 50, 121, 52, 112, 116, 45, 116, 106, 111, 113, 75, 88, 103, 89, 78, 118, 85, 90, 81,
        103, 57, 109, 85, 103, 51, 82, 82, 119, 55, 115, 67, 75, 107, 98, 84, 110, 88, 85, 55, 79, 100, 122, 86, 90, 78,
        112, 107, 69, 56, 103, 106, 79, 113, 97, 83, 89, 99, 45, 102, 74, 100, 101, 115, 69, 101, 53, 77, 102, 88, 48,
        79, 90, 113, 105, 104, 50, 52, 66, 79, 99, 121, 45, 100, 81, 115, 79, 78, 49, 71, 81, 69, 106, 85, 85, 108, 98,
        108, 108, 73, 69, 98, 122, 112, 78, 95, 105, 80, 118, 118, 50, 77, 65, 54, 66, 86, 113, 97, 50, 74, 110, 95, 82,
        101, 121, 100, 116, 83, 45, 71, 70, 72, 86, 75, 122, 67, 68, 71, 115, 104, 102, 97, 121, 100, 98, 119, 49, 89,
        66, 68, 53, 83, 85, 76, 82, 48, 98, 57, 101, 77, 65, 65, 76, 85, 120, 119, 74, 25, 113, 105, 97, 111, 121, 117,
        113, 105, 97, 110, 103, 64, 122, 104, 101, 110, 103, 116, 111, 111, 110, 46, 99, 111, 109, 82, -45, 1, 77, 73,
        71, 98, 77, 66, 65, 71, 66, 121, 113, 71, 83, 77, 52, 57, 65, 103, 69, 71, 66, 83, 117, 66, 66, 65, 65, 106, 65,
        52, 71, 71, 65, 65, 81, 66, 105, 67, 118, 76, 82, 70, 49, 104, 97, 122, 108, 73, 67, 82, 99, 69, 69, 97, 95, 78,
        89, 73, 51, 112, 77, 67, 50, 66, 109, 52, 57, 72, 103, 52, 98, 74, 115, 103, 73, 73, 105, 100, 118, 53, 75, 119,
        80, 73, 95, 85, 88, 78, 67, 118, 72, 115, 69, 88, 52, 110, 106, 83, 116, 70, 53, 82, 75, 71, 98, 75, 71, 55, 50,
        84, 103, 75, 74, 84, 82, 103, 120, 80, 72, 122, 84, 79, 89, 65, 114, 56, 53, 87, 115, 122, 121, 102, 51, 68, 72,
        106, 104, 75, 121, 67, 75, 49, 56, 90, 105, 88, 80, 122, 55, 84, 109, 88, 102, 83, 81, 87, 98, 97, 54, 72, 99,
        102, 78, 79, 97, 114, 102, 98, 69, 80, 111, 113, 120, 86, 115, 118, 87, 68, 69, 86, 119, 78, 99, 79, 90, 118,
        101, 112, 57, 65, 115, 101, 87, 102, 100, 95, 48, 51, 100, 69, 56, 78, 113, 70, 115, 87, 83, 70, 77, 114, 77,
        106, -84, 2, 123, 34, 115, 116, 111, 114, 101, 84, 121, 112, 101, 34, 58, 49, 44, 34, 97, 116, 116, 97, 99, 104,
        109, 101, 110, 116, 83, 105, 122, 101, 34, 58, 48, 44, 34, 102, 114, 111, 109, 78, 105, 99, 107, 78, 97, 109,
        101, 34, 58, 34, 112, 107, 116, 101, 115, 116, 122, 120, 109, 48, 56, 49, 57, 48, 51, 34, 44, 34, 97, 117, 116,
        104, 111, 114, 34, 58, 34, 112, 107, 116, 101, 115, 116, 122, 120, 109, 48, 56, 49, 57, 48, 51, 64, 109, 115,
        103, 115, 101, 97, 108, 46, 99, 111, 109, 34, 44, 34, 109, 115, 103, 73, 100, 34, 58, 34, 52, 49, 55, 100, 57,
        100, 54, 99, 45, 52, 102, 54, 100, 45, 52, 56, 49, 56, 45, 56, 50, 97, 102, 45, 52, 53, 102, 54, 50, 100, 53,
        52, 51, 51, 49, 101, 34, 44, 34, 102, 114, 111, 109, 71, 114, 111, 117, 112, 78, 97, 109, 101, 34, 58, 34, -25,
        -66, -92, -24, -127, -118, -27, -73, -91, -28, -67, -100, -27, -82, -92, -28, -72, -121, -28, -70, -117, -27,
        -90, -126, -26, -124, -113, 34, 44, 34, 102, 114, 111, 109, 34, 58, 34, 100, 46, 53, 51, 51, 55, 51, 52, 50, 56,
        56, 64, 109, 115, 103, 115, 101, 97, 108, 46, 99, 111, 109, 34, 44, 34, 116, 111, 34, 58, 34, 113, 105, 97, 111,
        121, 117, 113, 105, 97, 110, 103, 64, 122, 104, 101, 110, 103, 116, 111, 111, 110, 46, 99, 111, 109, 34, 44, 34,
        116, 121, 112, 101, 34, 58, 48, 44, 34, 116, 105, 109, 101, 115, 116, 97, 109, 112, 34, 58, 49, 53, 54, 54, 50,
        54, 55, 50, 53, 51, 50, 53, 53, 125, 114, 20, 109, 115, 103, 115, 101, 97, 108, 46, 116, 46, 101, 109, 97, 105,
        108, 58, 56, 48, 57, 57, 65, 65, 65, 65, 81, 119, 65, 65, 65, 69, 65, 65, 65, 65, 71, 81, 65, 65, 65, 66, 105,
        81, 73, 65, 120, 116, 73, 113, 57, 51, 83, 112, 69, 119, 121, 119, 113, 106, 119, 95, 54, 99, 57, 71, 77, 97,
        85, 78, 77, 57, 95, 65, 113, 113, 108, 74, 75, 70, 68, 121, 98, 100, 103, 119, 98, 77, 98, 97, 119, 55, 88, 68,
        82, 103, 51, 109, 76, 89, 76, 85, 117, 109, 115, 119, 114, 71, 53, 106, 111, 111, 103, 80, 103, 108, 104, 57,
        51, 82, 114, 109, 122, 116, 116, 120, 115, 113, 53, 102, 99, 50, 81, 71, 113, 66, 95, 100, 52, 55, 49, 80, 54,
        116, 51, 51, 104, 112, 56, 70, 97, 54, 81, 86, 121, 100, 65, 80, 109, 95, 116, 105, 87, 121, 122, 71, 51, 108,
        100, 107, 111, 112, 84, 88, 104, 82, 111, 82, 95, 72, 67, 75, 106, 111, 104, 83, 66, 50, 115, 88, 65, 104, 67,
        90, 48, 88, 110, 52, 49, 112, 86, 87, 74, 118, 95, 50, 54, 81, 116, 120, 115, 54, 82, 82, 86, 86, 83, 110, 88,
        117, 49, 109, 105, 110, 100, 86, 85, 113, 121, 110, 82, 54, 56, 51, 114, 86, 117, 84, 110, 57, 110, 100, 51, 98,
        112, 90, 48, 77, 97, 49, 73, 121, 109, 65, 103, 85, 74, 75, 73, 100, 112, 116, 103, 73, 90, 54, 48, 97, 112, 75,
        81, 109, 68, 86, 102, 78, 110, 55, 88, 50, 78, 49, 52, 89, 55, 82, 54, 102, 88, 104, 75, 74, 55, 54, 100, 101,
        66, 74, 104, 54, 109, 49, 101, 109, 109, 80, 112, 112, 107, 49, 104, 106, 56, 109, 50, 120, 119, 88, 84, 68,
        117, 113, 118, 75, 119, 102, 121, 85, 101, 55, 65, 119, 45, 89, 112, 118, 50, 53, 107, 89, 122, 104, 117, 101,
        78, 68, 75, 107, 55, 116, 100, 109, 57, 45, 45, 114, 67, 50, 101, 74, 77, 53, 84, 97, 98, 71, 83, 54, 69, 99,
        73, 110, 113, 49, 77, 78, 120, 51, 120, 53, 120, 108, 121, 108, 97, 111, 109, 80, 100, 52, 97, 113, 105, 76, 45,
        95, 120, 108, 65, 73, 80, 73, 72, 115, 49, 54, 49, 81, 65, 110, 82, 55, 70, 99, 98, 57, 84, 98, 67, 79, 65, 65,
        79, 78, 71, 73, 104, 117, 104, 104, 73, 102, 100, 68, 73, 70, 77, 84, 49, 110, 98, 72, 70, 74, 95, 70, 72, 45,
        107, 79, 101, 72, 90, 116, 118, 120, 100, 112, 122, 97, 80, 81, 68, 99, 50, 74, 117, 45, 76, 115, 85, 101, 88,
        108, 101, 116, 87, 90, 87, 78, 66, 57, 109, 108, 76, 99, 56, 102, 66, 53, 80, 108, 118, 69, 52, 99, 73, 72, 103,
        79, 99, 67, 99, 54, 74, 49, 50, 103, 95, 53, 54, 48, 99, 111, 57, 98, 45, 90, 76, 111, 90, 81, 67, 53, 88, 120,
        80, 53, 116, 77, 109, 105, 48, 121, 116, 99, 84, 111, 45, 82, 66, 74, 84, 107, 109, 118, 99, 107, 56, 103, 71,
        107, 103, 88, 101, 71, 113, 49, 118, 121, 97, 114, 84, 48, 99, 75, 121, 76, 97, 50, 56, 53, 90, 79, 45, 102,
        109, 120, 110, 102, 52, 85, 115, 69, 77, 100, 98, 78, 67, 75, 50, 79, 71, 102, 81, 82, 100, 99, 81, 50, 107, 52,
        102, 108, 67, 97, 71, 48, 50, 70, 52, 103, 74, 53, 116, 108, 56, 121, 107, 79, 78, 77, 83, 73, 120, 88, 78, 52,
        67, 48, 101, 67, 97, 50, 106, 105, 75, 67, 84, 51, 73, 82, 97, 121, 121, 106, 71, 73, 121, 85, 119, 69, 104, 66,
        88, 73, 121, 121, 97, 95, 45, 84, 65, 81, 120, 65, 121, 69, 74, 108, 51, 87, 119, 86, 79, 113, 90, 98, 101, 122,
        122, 55, 75, 79, 86, 53, 119, 111, 99, 65, 116, 79, 69, 72, 114, 87, 70, 81, 103, 106, 100, 74, 115, 105, 90,
        119, 73, 73, 102, 48, 88, 67, 77, 53, 115, 83, 108, 109, 102, 120, 56, 48, 95, 69, 102, 50, 112, 45, 118, 57,
        97, 95, 119, 66, 67, 79, 82, 51, 54, 57, 104, 74, 78, 111, 83, 115, 66, 70, 85, 71, 97, 65};

    FileOutputStream fos = new FileOutputStream("bb.txt");
    fos.write(bb);
    fos.flush();
    fos.close();
  }

  @Test
  public void testBase64() throws Exception {

    String orignalStr = "你好，花名册";
    String encode = Base64.getUrlEncoder().encodeToString(orignalStr.getBytes());
    String s = new String(Base64.getUrlDecoder().decode(encode));
    assert s.equals(orignalStr);

  }


  @Test
  public void decode() {
    String s = "eyJmcm9tIjoibGh6MTg4QHN5c3Rvb250ZXN0LmNvbSIsImZyb21OaWNrTmFtZSI6IuWQjeS6hiIsIm1zZ0lkIjoiOTUwNmU5M2MtYjY5OC00YzNmLTgxNTUtMTdiNjlkMmNmYWViIiwicGFyZW50TXNnSWQiOiIiLCJzZXNzaW9uRXh0RGF0YSI6IntcImF2YXRhckhvc3RcIjpcImh0dHA6Ly9tc2dzZWFsLnN5c3Rvb250ZXN0LmNvbS90ZW1haWxpbWFnZXMvXCIsXCJjb250YWN0VHlwZVwiOjEsXCJpc0VtYWlsXCI6ZmFsc2UsXCJuYW1lXCI6XCJcdTU0MGRcdTRlODZcIn0iLCJzdG9yZVR5cGUiOjEsInRvIjoibGh6MTU1QHN5c3Rvb250ZXN0LmNvbSIsInR5cGUiOjB9";
    System.out.println(new String(Base64.getUrlDecoder().decode(s)));
  }

}
